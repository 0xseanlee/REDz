local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = game.Players.LocalPlayer
local root = player.Character.HumanoidRootPart

-- ã€é›ªåœ°å³¶ç²¾ç¢ºåº§æ¨™èˆ‡è¨­å®šã€‘
local Config = {
    QuestName = "SnowQuest", -- åµæ¸¬å‡ºçš„ç³»çµ±åç¨±
    QuestID = 1,             -- Snow Bandits åºè™Ÿ
    MonsterPos = Vector3.new(1389, 105, -1298), -- é›ªåœ°æ€ªåˆ·æ–°é»åº§æ¨™
    Weapon = "Cursed Dual Katana"               -- è£å‚™ä½ çš„ CDK
}

print("--- â„ï¸ é›ªåœ°å³¶è‡ªå‹•å¾ªç’°å•Ÿå‹• (BM_20SHOP7202) ---")

-- 1. è‡ªå‹•è£å‚™ CDK
local function EquipWeapon()
    local tool = player.Backpack:FindFirstChild(Config.Weapon)
    if tool then player.Character.Humanoid:EquipTool(tool) end
end

-- 2. æ ¸å¿ƒè‡ªå‹•åŒ–é‚è¼¯
task.spawn(function()
    while task.wait(0.5) do
        local questUI = player.PlayerGui.Main:FindFirstChild("Quest")
        
        if questUI and not questUI.Visible then
            -- A: æ²’ä»»å‹™æ™‚ï¼Œé ç¨‹æ¥å– SnowQuest
            print("ğŸ“ æ¥å– SnowQuest...")
            ReplicatedStorage.Remotes.CommF_:InvokeServer("AcceptQuest", Config.QuestName, Config.QuestID)
        else
            -- B: æœ‰ä»»å‹™æ™‚ï¼Œé£›å¾€æ€ªé»ä¸¦è‡ªå‹•æ”»æ“Š
            EquipWeapon()
            -- æ‡¸åœåœ¨æ€ªç‰©é ­ä¸Š 5 æ ¼è™•ä»¥ç¢ºä¿å®‰å…¨
            root.CFrame = CFrame.new(Config.MonsterPos + Vector3.new(0, 5, 0))
            
            -- ä½¿ç”¨ VirtualUser æ¨¡æ“¬é»æ“Šé€²è¡Œ CDK ç æ®º
            game:GetService("VirtualUser"):CaptureController()
            game:GetService("VirtualUser"):Button1Down(Vector2.new(1280, 672))
        end
    end
end)
