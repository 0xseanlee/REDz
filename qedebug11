local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer

-- ã€Webhook è¨­å®šã€‘
local WebhookURL = "https://discord.com/api/webhooks/1468528458056339529/WKTq9fLdmYaWVaM4b-yy78n9cEP5qB2NQx254k1pMLqJusi6HFefvtBL3vOaKznHoiFH"

print("ğŸš€ [Macç‰ˆ] å•Ÿå‹•å…¨æ–¹ä½æ•¸æ“šæƒæ...")

local function UniversalRequest(payload)
    local req = (syn and syn.request) or (http and http.request) or http_request or request
    if req then
        pcall(function()
            req({
                Url = WebhookURL,
                Method = "POST",
                Headers = {["Content-Type"] = "application/json"},
                Body = HttpService:JSONEncode(payload)
            })
        end)
    end
end

-- 1. æ·±å±¤æƒææ‰€æœ‰ Data æ•¸å€¼ (ç­‰ç´šã€é‡‘éŒ¢ã€å±¬æ€§é»ç­‰)
local statsInfo = ""
if player:FindFirstChild("Data") then
    for _, v in pairs(player.Data:GetChildren()) do
        if v:IsA("ValueBase") then
            statsInfo = statsInfo .. string.format("â€¢ **%s**: %s\n", v.Name, tostring(v.Value))
        end
    end
end

-- 2. æƒæèƒŒåŒ… (Inventory)
local invList = {}
for _, item in pairs(player.Backpack:GetChildren()) do
    table.insert(invList, item.Name)
end

-- 3. ä¿®æ­£å ±éŒ¯çš„ä»»å‹™æŠ“å–é‚è¼¯ (éæ­·æœå°‹ Text)
local currentQuest = "ç„¡ä»»å‹™"
pcall(function()
    local qContainer = player.PlayerGui.Main.Quest.Container
    -- é€™è£¡æ”¹ç”¨éè¿´å°‹æ‰¾ä»»ä½•åŒ…å«ä»»å‹™åç¨±çš„ TextLabel
    for _, obj in pairs(qContainer:GetDescendants()) do
        if (obj:IsA("TextLabel") or obj:IsA("TextBox")) and obj.Text ~= "" then
            if obj.Name:find("Title") or obj.Name:find("Name") then
                currentQuest = obj.Text
                break
            end
        end
    end
end)

-- 4. æ ¼å¼åŒ–åµŒå…¥è¨Šæ¯
local report = {
    embeds = {{
        title = "ğŸ“Š çµ‚æ¥µæ•¸æ“šå ±å‘Š: " .. player.Name,
        color = 0x5865F2,
        fields = {
            {name = "ğŸ› ï¸ ç³»çµ±å±¬æ€§", value = statsInfo ~= "" and statsInfo or "æœªæ‰¾åˆ°æ•¸æ“š", inline = false},
            {name = "ğŸ’ èƒŒåŒ…æ‘˜è¦", value = #invList > 0 and table.concat(invList, ", ") or "ç©ºç©ºå¦‚ä¹Ÿ", inline = false},
            {name = "âš”ï¸ ç•¶å‰ä»»å‹™ç‹€æ…‹", value = currentQuest, inline = true},
            {name = "ğŸŒ ç•¶å‰ä½ç½®", value = tostring(player.Character.HumanoidRootPart.Position), inline = true}
        },
        footer = {text = "æƒæå™¨ç‰ˆæœ¬: Mac_Stable_V2 | ä¼ºæœå™¨æ™‚é–“: " .. os.date("%X")}
    }}
}

-- åŸ·è¡Œ
UniversalRequest(report)
print("âœ… æƒæå®Œæˆï¼Œæ•¸æ“šå·²ç™¼é€ã€‚")
