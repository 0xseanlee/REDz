local HttpService = game:GetService("HttpService")
local WebhookURL = "https://discord.com/api/webhooks/1468528458056339529/WKTq9fLdmYaWVaM4b-yy78n9cEP5qB2NQx254k1pMLqJusi6HFefvtBL3vOaKznHoiFH"

print("--- [ç©©å®šç‰ˆ] UI ä»»å‹™æ•¸æ“šç›£æ¸¬å™¨å•Ÿå‹• ---")

-- ç™¼é€å‡½æ•¸
local function Send(msg)
    local req = (syn and syn.request) or (http and http.request) or http_request or request
    if req then
        req({
            Url = WebhookURL,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = HttpService:JSONEncode({content = msg})
        })
    end
end

-- ç›£æ§ UI è®ŠåŒ–
local player = game.Players.LocalPlayer
local lastData = ""

task.spawn(function()
    while task.wait(2) do -- æ¯ 2 ç§’æª¢æŸ¥ä¸€æ¬¡ä½ çš„è¢å¹•
        local mainGui = player.PlayerGui:FindFirstChild("Main")
        local questGui = mainGui and mainGui:FindFirstChild("Quest")
        
        -- å¦‚æœå°è©±æ¡†æ˜¯é–‹å•Ÿç‹€æ…‹
        if questGui and questGui.Visible then
            local container = questGui:FindFirstChild("Container")
            if container then
                local currentBatch = "ğŸ“ åµæ¸¬åˆ°è¢å¹•ä»»å‹™æ¸…å–®ï¼š\n"
                local found = false
                
                -- æƒæå°è©±æ¡†å…§çš„æ‰€æœ‰æŒ‰éˆ•æ–‡å­—
                for _, item in pairs(container:GetChildren()) do
                    if item:IsA("TextButton") and item.Text ~= "" then
                        currentBatch = currentBatch .. "- " .. item.Text .. "\n"
                        found = true
                    end
                end
                
                -- å¦‚æœæŠ“åˆ°äº†æ–°æ•¸æ“šï¼Œä¸”è·Ÿä¸Šæ¬¡ä¸ä¸€æ¨£ï¼Œå°±ç™¼é€
                if found and currentBatch ~= lastData then
                    lastData = currentBatch
                    print("âœ… æˆåŠŸå¾ UI æŠ“å–ä»»å‹™è³‡è¨Š")
                    Send("```\n" .. currentBatch .. "\n```")
                end
            end
        end
    end
end)
