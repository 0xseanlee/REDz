local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = game.Players.LocalPlayer

-- ã€æ ¹æ“šæ•¸æ“šå ±å‘Šè¨­å®šã€‘
local QuestConfig = {
    RemoteName = "CommF_",             -- æ•¸æ“šå ±å‘Šé¡¯ç¤ºçš„é€šè¨Šå”è­°æ ¸å¿ƒ
    QuestName = "Defeat 6 Monkeys",         -- ä¸€æµ·çŒ´å­ä»»å‹™çš„ç³»çµ±å…§éƒ¨åç¨±
    QuestLevel = 1,                    -- ç¬¬ä¸€å€‹é¸é … (Monkeys)
    CheckDelay = 5                     -- æ¯ 5 ç§’æª¢æŸ¥ä¸€æ¬¡
}

print("--- ğŸš€ [ä¸€æµ·è‡ªå‹•åŒ–] æ­£åœ¨é‡å° BM_20SHOP7202 å•Ÿå‹•æ¥ä»»å‹™åŠŸèƒ½ ---")

-- å‡½æ•¸ï¼šæª¢æŸ¥ç•¶å‰ä»»å‹™ç‹€æ…‹ (æ ¹æ“šä½ çš„æ•¸æ“šå ±å‘Šé‚è¼¯)
local function IsQuestActive()
    local mainGui = player.PlayerGui:FindFirstChild("Main")
    local questGui = mainGui and mainGui:FindFirstChild("Quest")
    -- å¦‚æœ Quest è¦–çª—æ˜¯å¯è¦‹çš„ï¼Œä»£è¡¨ä»»å‹™é€²è¡Œä¸­
    return questGui and questGui.Visible
end

-- æ ¸å¿ƒè‡ªå‹•å¾ªç’°
task.spawn(function()
    while true do
        local success, err = pcall(function()
            if not IsQuestActive() then
                print("ğŸ“ åµæ¸¬åˆ°ç„¡ä»»å‹™ï¼Œæ­£åœ¨é ç«¯æ¥å–: Monkeys")
                
                -- å–å¾—é€šè¨Šé ç«¯
                local remote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild(QuestConfig.RemoteName)
                
                -- åŸ·è¡Œæ¥ä»»å‹™æŒ‡ä»¤
                -- åƒæ•¸ 1: "AcceptQuest" (å‹•ä½œ)
                -- åƒæ•¸ 2: "JungleQuest" (ä»»å‹™çµ„å)
                -- åƒæ•¸ 3: 1 (ä»»å‹™åºè™Ÿï¼Œå³ Monkey)
                remote:InvokeServer("AcceptQuest", QuestConfig.QuestName, QuestConfig.QuestLevel)
                
                print("âœ… å·²æˆåŠŸç™¼é€æ¥å–è«‹æ±‚")
            end
        end)
        
        if not success then
            warn("âŒ è‡ªå‹•æ¥ä»»å‹™ç™¼ç”ŸéŒ¯èª¤: " .. tostring(err))
        end
        
        task.wait(QuestConfig.CheckDelay)
    end
end)
