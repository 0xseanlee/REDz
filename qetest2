local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = game.Players.LocalPlayer

-- ã€æ ¹æ“šåµæ¸¬çµæœæ›´æ–°ï¼šé›ªåœ°å³¶ä»»å‹™ã€‘
local QuestConfig = {
    QuestName = "SnowQuest", -- é›ªåœ°å³¶ç³»çµ±åç¨±
    QuestID = 1,             -- 1 ä»£è¡¨ Snow Bandits
    CheckDelay = 5
}

print("--- â„ï¸ [è‡ªå‹•åŒ–] æ­£åœ¨é‡å° BM_20SHOP7202 å•Ÿå‹•é›ªåœ°ä»»å‹™æ¥å– ---")

local function IsQuestActive()
    local mainGui = player.PlayerGui:FindFirstChild("Main")
    local questGui = mainGui and mainGui:FindFirstChild("Quest")
    -- åªè¦ UI å¯è¦‹å°±ä»£è¡¨ä»»å‹™é€²è¡Œä¸­
    return questGui and questGui.Visible
end

task.spawn(function()
    while true do
        local success, err = pcall(function()
            if not IsQuestActive() then
                print("ğŸ“ åµæ¸¬åˆ°ç„¡ä»»å‹™ï¼Œæ­£åœ¨æ¥å–: Snow Bandits")
                
                -- å‘¼å«ä¸€æµ·æ¨™æº– CommF_ å”è­°
                local remote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("CommF_")
                remote:InvokeServer("AcceptQuest", QuestConfig.QuestName, QuestConfig.QuestID)
                
                print("âœ… å·²æˆåŠŸç™¼é€ SnowQuest æ¥å–è«‹æ±‚")
            end
        end)
        
        if not success then
            warn("âš ï¸ æ¥ä»»å‹™å¤±æ•—: " .. tostring(err))
        end
        
        task.wait(QuestConfig.CheckDelay)
    end
end)
